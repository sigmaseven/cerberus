# Basic Fluent Bit configuration for Cerberus
# This is a lightweight setup for forwarding container logs

[SERVICE]
    Flush        5
    Daemon       Off
    Log_Level    info
    Parsers_File parsers.conf

# Input: System logs
[INPUT]
    Name        systemd
    Tag         syslog.system
    Systemd_Filter  _SYSTEMD_UNIT=*.service
    Read_From_Tail  On

# Input: Container logs
[INPUT]
    Name        tail
    Path        /var/log/containers/*.log
    Parser      docker
    Tag         docker.container
    Refresh_Interval 5
    Mem_Buf_Limit    5MB
    Skip_Long_Lines  On

# Filter: Add hostname
[FILTER]
    Name        modify
    Match       *
    Add         hostname ${HOSTNAME}

# Output: Forward to Cerberus
[OUTPUT]
    Name        forward
    Match       *
    Host        cerberus.example.com
    Port        24225
    Time_as_Integer On
